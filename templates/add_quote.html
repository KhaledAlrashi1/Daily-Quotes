{% extends 'base.html' %}

{% block content %}
<div class="container">
    <h1 class="my-4 text-center">Add New Quote(s)</h1>
    <form method="post" id="quoteForm">
        <div id="quote-fields">
            <div class="form-group quote-field">
                <label for="quote1">Quote 1</label>
                <textarea class="form-control" id="quote1" name="quotes" rows="3" required></textarea>
                <small class="form-text text-muted">Enter a new quote.</small>
                
                <label for="category1" class="mt-2">Category</label>
                <select class="form-control" id="category1" name="categories" required>
                    <option value="" disabled selected>Select a category</option>
                    <option value="Health">Health</option>
                    <option value="Professional Growth">Professional Growth</option>
                    <option value="Relationships">Relationships</option>
                    <option value="Well-being">Well-being</option>
                    <option value="Personal Development">Personal Development</option>
                    <option value="Spirituality">Spirituality</option>
                    <option value="Resilience">Resilience</option>
                    <option value="Creativity">Creativity</option>                    
                    <option value="Productivity">Productivity</option>                    
                </select>
                <small class="form-text text-muted">Select the appropriate category for the quote.</small>
            </div>
        </div>
        
        <div class="text-center mt-3">
            <button type="button" class="btn btn-secondary mb-3" id="addQuoteBtn">Add Another Quote</button>
        </div>
        
        <div class="text-center">
            <button type="submit" class="btn btn-success btn-lg">Add Quote(s)</button>
            <a href="{{ url_for('home') }}" class="btn btn-outline-secondary btn-lg">Back to Home</a>
        </div>
    </form>
</div>

<!-- JavaScript to handle adding more quote fields -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    let quoteCount = 1;
    const maxQuotes = 10;
    const addQuoteBtn = document.getElementById('addQuoteBtn');
    const quoteFields = document.getElementById('quote-fields');

    addQuoteBtn.addEventListener('click', function() {
        const currentQuotes = document.querySelectorAll('.quote-field textarea');
        const currentCategories = document.querySelectorAll('.quote-field select');

        // Check if any existing fields are empty
        for (let i = 0; i < currentQuotes.length; i++) {
            if (currentQuotes[i].value.trim() === '' || currentCategories[i].value === '') {
                alert('Please fill out all existing quote fields and select categories before adding a new one.');
                return;
            }
        }

        // Limit the number of quotes that can be added
        if (quoteCount >= maxQuotes) {
            alert('You have reached the maximum number of quotes.');
            return;
        }

        quoteCount++;
        const newQuoteDiv = document.createElement('div');
        newQuoteDiv.classList.add('form-group', 'quote-field', 'mt-3');
        newQuoteDiv.innerHTML = `
            <label for="quote${quoteCount}">Quote ${quoteCount}</label>
            <textarea class="form-control" id="quote${quoteCount}" name="quotes" rows="3" required></textarea>
            <small class="form-text text-muted">Enter a new quote.</small>
            
            <label for="category${quoteCount}" class="mt-2">Category</label>
            <select class="form-control" id="category${quoteCount}" name="categories" required>
                <option value="" disabled selected>Select a category</option>
                <option value="Health">Health</option>
                <option value="Professional Growth">Professional Growth</option>
                <option value="Relationships">Relationships</option>
                <option value="Well-being">Well-being</option>
                <option value="Personal Development">Personal Development</option>
                <option value="Spirituality">Spirituality</option>
                <option value="Resilience">Resilience</option>
                <option value="Creativity">Creativity</option>
                <option value="Productivity">Productivity</option>
            </select>
            <small class="form-text text-muted">Select the appropriate category for the quote.</small>
        `;
        quoteFields.appendChild(newQuoteDiv);
    });
});
</script>
{% endblock %}